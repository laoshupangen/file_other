(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["schoolApp-pages-views-secureAreaForm"],{2365:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,"._check_list[data-v-0e344806]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-justify-content:space-around;justify-content:space-around;width:100%}._check_item[data-v-0e344806]{min-width:30px;height:30px;padding:0 5px;line-height:30px;text-align:center;border-radius:15px;background:#ebedf2;cursor:default;font-size:14px}._active_checked[data-v-0e344806]{background:#528adf;color:#fff}",""]),e.exports=t},"282c":function(e,t,a){"use strict";var i=a("ee27");a("99af"),a("4de4"),a("c740"),a("caad"),a("d81d"),a("2532"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("d0ff")),r={data:function(){return{index:[]}},props:{options:Array,value:Array},methods:{getOptionLabel:function(e){return"object"?e.label:e},getOptionValue:function(e){return"object"?e.value:e},select:function(e,t){this.index.includes(t)?this.index=this.index.filter((function(e){return e!==t})):this.index=[].concat((0,n.default)(this.index),[t])}},watch:{index:function(e){var t=this.options.filter((function(t,a){return e.includes(a)})).map((function(e){return e.value?e.value:e}));this.$emit("input",t)}},mounted:function(){var e=this;this.value&&this.value.length>0&&(this.index=this.value.map((function(t){var a=e.options;return a.findIndex((function(e){return e.value===t}))})))}};t.default=r},"29a4":function(e,t,a){var i=a("2365");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("367f05c0",i,!0,{sourceMap:!1,shadowMode:!1})},"3b21":function(e,t,a){"use strict";var i=a("29a4"),n=a.n(i);n.a},"61d7":function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"_check_list"},e._l(e.options,(function(t,i){return a("v-uni-view",{key:i},[a("v-uni-view",{staticClass:"_check_item",class:e.index.length>0&&e.index.includes(i)?"_active_checked":"",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.select(t,i)}}},[e._v(e._s(e.getOptionLabel(t)))])],1)})),1)},r=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}))},"6f9c":function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{staticClass:"_s_section"},[a("v-uni-view",{staticClass:"_cform_item"},[a("m-input",{staticClass:"wxx_minput",attrs:{align:"right",label:"名称",placeholder:"安全区域名称"},model:{value:e.form.name.value,callback:function(t){e.$set(e.form.name,"value",t)},expression:"form.name.value"}})],1),a("v-uni-view",{staticClass:"_cform_item"},[a("v-uni-view",{staticStyle:{"padding-bottom":"15px","font-weight":"bold"}},[e._v("每周启用时间")]),a("m-check-box",{attrs:{options:e.coptions},model:{value:e.form.allowDays.value,callback:function(t){e.$set(e.form.allowDays,"value",t)},expression:"form.allowDays.value"}})],1),a("v-uni-view",{staticClass:"_cform_item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseCenter.apply(void 0,arguments)}}},[a("m-cell",{attrs:{label:"中心位置"},model:{value:e.form.addressName.value,callback:function(t){e.$set(e.form.addressName,"value",t)},expression:"form.addressName.value"}})],1),e.form.addressName.value?a("v-uni-view",{staticClass:"_cform_item"},[a("m-input",{staticClass:"wxx_minput",attrs:{type:"number",align:"right",label:"范围",placeholder:"安全区域范围"},model:{value:e.form.radius.value,callback:function(t){e.$set(e.form.radius,"value",t)},expression:"form.radius.value"}})],1):e._e()],1),a("v-uni-view",{staticClass:"_m_section"},[e.center.latitude?a("v-uni-map",{staticStyle:{width:"100%",height:"300px"},attrs:{markers:e.markers,circles:e.circle,latitude:e.center.latitude,longitude:e.center.longitude}}):e._e()],1),a("v-uni-view",{staticClass:"submit_button"},[a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("确定")])],1)],1)},r=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}))},"78ad":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".wrap[data-v-d9fec61a]{height:100%;display:-webkit-box;display:-webkit-flex;display:flex;width:100%}._s_section[data-v-d9fec61a]{width:100%}._m_section[data-v-d9fec61a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;width:100%}.item[data-v-d9fec61a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#528adf}._cform_item[data-v-d9fec61a]{padding:20px 5px;border-bottom:1px solid #e4e4e4}",""]),e.exports=t},"8e0a":function(e,t,a){"use strict";a.r(t);var i=a("dc37"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t["default"]=n.a},a38b:function(e,t,a){"use strict";a.r(t);var i=a("6f9c"),n=a("8e0a");for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);a("e918");var u,o=a("f0c5"),l=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"d9fec61a",null,!1,i["a"],u);t["default"]=l.exports},d527:function(e,t,a){"use strict";a.r(t);var i=a("61d7"),n=a("f25e");for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);a("3b21");var u,o=a("f0c5"),l=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"0e344806",null,!1,i["a"],u);t["default"]=l.exports},dc37:function(e,t,a){"use strict";(function(e){var i=a("ee27");a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("f3f3"));a("96cf");var r=i(a("c964")),u=a("e9c1"),o=a("6455"),l=a("95f0"),c=i(a("051a")),s=i(a("97f6")),d=i(a("d527")),f={data:function(){return{type:"",center:{},markers:[],circle:[],coptions:[{value:7,label:"周日"},{value:1,label:"周一"},{value:2,label:"周二"},{value:3,label:"周三"},{value:4,label:"周四"},{value:5,label:"周五"},{value:6,label:"周六"}],form:{id:{value:""},imei:{value:(0,o.getStorage)("bindBaby").icCard?(0,o.getStorage)("bindBaby").icCard:""},name:{value:"",label:"名称",rule:{required:!0}},allowed:{value:!1},allowDays:{value:[],label:"每周启用时间",rule:{required:!0}},radius:{value:"",label:"范围",rule:{required:!0}},addressName:{value:"",label:"中心位置",rule:{required:!0}}}}},components:{mCell:c.default,mInput:s.default,mCheckBox:d.default},onLoad:function(t){if(t){var a=t.type;switch(this.type=a,a){case"add":uni.setNavigationBarTitle({title:"新增安全区域"});break;case"edit":uni.setNavigationBarTitle({title:"编辑安全区域"});var i=JSON.parse(t.form);e("log","centerPoint",i.centerPoint," at schoolApp/pages/views/secureAreaForm.vue:140"),this.center={latitude:i.centerPoint.latitude,longitude:i.centerPoint.longitude},this.markers=[{id:1,latitude:i.centerPoint.latitude,longitude:i.centerPoint.longitude}],this.circle=[{latitude:i.centerPoint.latitude,longitude:i.centerPoint.longitude,radius:i.radius,strokeWidth:1,color:"#428BCA88",fillColor:"#B6E1F248"}],this.form=this.form.mapValue((function(e,t){return e["value"]=i[t],e})),this.form.addressName.value=i.centerPoint.address.address;break}}},methods:{chooseCenter:function(){var t=this;uni.chooseLocation({success:function(a){e("log","success",a," at schoolApp/pages/views/secureAreaForm.vue:174"),t.center=a,t.form.addressName.value=a.address,t.markers=[{id:1,latitude:a.latitude,longitude:a.longitude,title:a.name}]},fail:function(t){e("log","err",t," at schoolApp/pages/views/secureAreaForm.vue:186")}})},submit:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,u.validatorModel)(e.form);case 3:a=t.sent,i=e.type,"edit"===i?e.updateSecureArea(a):e.addSecureArea(a),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),uni.showToast({title:t.t0.message,icon:"none"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},updateSecureArea:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var i,r,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.center,a.next=3,(0,l.updateSecureArea)((0,n.default)({},e,{centerPoint:{latitude:i.latitude,longitude:i.longitude,address:{address:i.name}}}));case 3:r=a.sent,u=r.msg,uni.showToast({title:u||"修改成功",icon:"none"}),setTimeout((function(){uni.navigateBack({delta:2})}),500);case 7:case"end":return a.stop()}}),a)})))()},addSecureArea:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var i,r,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.center,a.next=3,(0,l.addSecureArea)((0,n.default)({},e,{centerPoint:{latitude:i.latitude,longitude:i.longitude,address:{address:i.name}}}));case 3:r=a.sent,u=r.msg,uni.showToast({title:u||"新增成功",icon:"none"}),setTimeout((function(){uni.navigateBack()}),500);case 7:case"end":return a.stop()}}),a)})))()}},watch:{"form.radius.value":function(e){if(e){var t=this.center;this.circle=[{latitude:t.latitude,longitude:t.longitude,radius:Number(e),strokeWidth:1,color:"#428BCA88",fillColor:"#B6E1F248"}]}}}};t.default=f}).call(this,a("0de9")["log"])},e918:function(e,t,a){"use strict";var i=a("f1fef"),n=a.n(i);n.a},f1fef:function(e,t,a){var i=a("78ad");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("36d0a3d4",i,!0,{sourceMap:!1,shadowMode:!1})},f25e:function(e,t,a){"use strict";a.r(t);var i=a("282c"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t["default"]=n.a}}]);